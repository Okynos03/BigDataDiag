<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Examen Diagnostico Empleados</title>
  <link rel="stylesheet" href="../static/styles.css">
</head>
<body>
  <h1>Empleados</h1>

  <nav>
    <a href="/#reporte1">1) Listar a todos los empleados con sus datos básicos</a>
    <a href="/#reporte2">2) Empleados vigentes por departamento</a>
    <a href="/salarios#reporte3">3) Salario actual de cada empleado vigente</a>
    <a href="/managers#reporte4">4) Manager actual de cada departamento</a>
    <a href="/highest#reporte5">5) Empleado mejor pagado en cada departamento</a>
    <a href="/#graficas">6) Gráficas</a>
  </nav>

  <!-- REPORTE 1: Empleados -->
  <h2 id="reporte1">Reporte 1: Empleados</h2>
  <div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>num_empleado</th>
        <th>nombre</th>
        <th>apellidos</th>
        <th>genero</th>
        <th>fecha_contrato</th>
      </tr>
    </thead>
    <tbody>
      {% if empleados and empleados|length > 0 %}
        {% for e in empleados %}
          <tr>
            <td>{{ e.num_empleado }}</td>
            <td>{{ e.nombre }}</td>
            <td>{{ e.apellidos }}</td>
            <td>{{ e.genero }}</td>
            <td>{{ e.fecha_contrato }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="5" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>
  </div>

  <!-- REPORTE 2: Vigentes por Departamento -->
  <h2 id="reporte2">Reporte 2: Vigentes por Departamento</h2>
  <form method="get" action="/pordept">
    <label for="dept_id">Departamento:</label>
    <select id="dept_id" name="dept_id">
      <option value="" {% if dept_id == None %}selected{% endif %}>-- Selecciona --</option>
      <option value="0" {% if dept_id == 0 %}selected{% endif %}>Todos</option>
      {% for d in departamentos %}
        <option value="{{ d.id }}" {% if dept_id and d.id == dept_id %}selected{% endif %}>{{ d.nombre }}</option>
      {% endfor %}
    </select>
    <button type="submit">Filtrar</button>
  </form>

  <div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>num_empleado</th>
        <th>nombre_completo</th>
        <th>departamento</th>
      </tr>
    </thead>
    <tbody>
      {% if vigentes and vigentes|length > 0 %}
        {% for v in vigentes %}
          <tr>
            <td>{{ v.num_empleado }}</td>
            <td>{{ v.nombre_completo }}</td>
            <td>{{ v.departamento }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>
  </div>

  <!-- REPORTE 3: Salarios actuales -->
  <h2 id="reporte3">Reporte 3: Salarios actuales</h2>
  <div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>num_empleado</th>
        <th>nombre_completo</th>
        <th>salario</th>
      </tr>
    </thead>
    <tbody>
      {% if salarios and salarios|length > 0 %}
        {% for s in salarios %}
          <tr>
            <td>{{ s.num_empleado }}</td>
            <td>{{ s.nombre_completo }}</td>
            <td>{{ s.salario }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="3" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>
  </div>

  <!-- REPORTE 4: Managers -->
  <h2 id="reporte4">Reporte 4: Managers</h2>
  <div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>departamento</th>
        <th>nombre_completo</th>
        <th>fecha_inicio</th>
      </tr>
    </thead>
    <tbody>
      {% if managers and managers|length > 0 %}
        {% for m in managers %}
          <tr>
            <td>{{ m.departamento }}</td>
            <td>{{ m.nombre_completo }}</td>
            <td>{{ m.fecha_inicio }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>
  </div>

  <!-- REPORTE 5: Top pagado por departamento -->
  <h2 id="reporte5">Reporte 5: Top pagado</h2>
  <div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>departamento</th>
        <th>num_empleado</th>
        <th>nombre_completo</th>
        <th>salario</th>
      </tr>
    </thead>
    <tbody>
      {% if top_pagados and top_pagados|length > 0 %}
        {% for t in top_pagados %}
          <tr>
            <td>{{ t.departamento }}</td>
            <td>{{ t.num_empleado }}</td>
            <td>{{ t.nombre_completo }}</td>
            <td>{{ t.salario }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>
  </div>

  <!--AQUI VAN LAS GRAFICAAAS-->
  <h2 id="graficas">Gráficas</h2>

  <section class="charts-grid">
  <!--grafica pastel-->
  <article class="chart-card">
    <h3 class="chart-title">Comparación por género (H vs M)</h3>
    <div class="chart-body">



    </div>
  </article>

  <!--grafica horizontal -->
  <article class="chart-card">
    <h3 class="chart-title">Top 10 empleados mejor pagados</h3>
    <div class="chart-body">



    </div>
  </article>

  <!--grafica vertical-->
  <article class="chart-card">
    <h3 class="chart-title">Promedio de salarios por departamento</h3>
    <div class="chart-body">



    </div>
  </article>
</section>

</body>
</html>