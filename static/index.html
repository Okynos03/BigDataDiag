<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Examen Diagnostico Empleados</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 16px; }
    table { border-collapse: collapse; width: 100%; margin: 12px 0; }
    th, td { border: 1px solid #ccc; padding: 6px 8px; text-align: left; }
    th { background: #f5f5f5; }
    .muted { color: #666; }
  </style>
</head>
<body>
  <h1>Empleados</h1>

  <nav>
    <p>1) Listar a todos los empleados con sus datos b√°sicos</p>
    <p>2) Empleados vigentes por departamento</p>
    <p>3) Salario actual de cada empleado vigente</p>
    <p>4) Manager actual de cada departamento</p>
    <p>5) Empleado mejor pagado en cada departamento</p>
  </nav>

  <!-- REPORTE 1: Empleados -->
  <h2>Reporte 1: Empleados</h2>
  <table>
    <thead>
      <tr>
        <th>num_empleado</th>
        <th>nombre</th>
        <th>apellidos</th>
        <th>genero</th>
        <th>fecha_contrato</th>
      </tr>
    </thead>
    <tbody>
      {% if empleados and empleados|length > 0 %}
        {% for e in empleados %}
          <tr>
            <td>{{ e.num_empleado }}</td>
            <td>{{ e.nombre }}</td>
            <td>{{ e.apellidos }}</td>
            <td>{{ e.genero }}</td>
            <td>{{ e.fecha_contrato }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="5" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>

  <!-- REPORTE 2: Vigentes por Departamento -->
  <h2>Reporte 2: Vigentes por Departamento</h2>
  <form method="get" action="/">
    <label for="dept_id">Departamento:</label>
    <select id="dept_id" name="dept_id">
      <option value="">-- Selecciona --</option>
      {% for d in departamentos %}
        <option value="{{ d.id }}" {% if dept_id and d.id == dept_id %}selected{% endif %}>{{ d.nombre }}</option>
      {% endfor %}
    </select>
    <button type="submit">Filtrar</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>num_empleado</th>
        <th>nombre_completo</th>
        <th>departamento</th>
        <th>salario</th>
      </tr>
    </thead>
    <tbody>
      {% if vigentes and vigentes|length > 0 %}
        {% for v in vigentes %}
          <tr>
            <td>{{ v.num_empleado }}</td>
            <td>{{ v.nombre_completo }}</td>
            <td>{{ v.departamento }}</td>
            <td>{{ v.salario }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>

  <!-- REPORTE 3: Salarios actuales -->
  <h2>Reporte 3: Salarios actuales</h2>
  <table>
    <thead>
      <tr>
        <th>num_empleado</th>
        <th>nombre_completo</th>
        <th>salario</th>
      </tr>
    </thead>
    <tbody>
      {% if salarios and salarios|length > 0 %}
        {% for s in salarios %}
          <tr>
            <td>{{ s.num_empleado }}</td>
            <td>{{ s.nombre_completo }}</td>
            <td>{{ s.salario }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="3" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>

  <!-- REPORTE 4: Managers -->
  <h2>Reporte 4: Managers</h2>
  <table>
    <thead>
      <tr>
        <th>departamento</th>
        <th>nombre</th>
        <th>apellidos</th>
        <th>fecha_inicio</th>
      </tr>
    </thead>
    <tbody>
      {% if managers and managers|length > 0 %}
        {% for m in managers %}
          <tr>
            <td>{{ m.departamento }}</td>
            <td>{{ m.nombre }}</td>
            <td>{{ m.apellidos }}</td>
            <td>{{ m.fecha_inicio }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>

  <!-- REPORTE 5: Top pagado por departamento -->
  <h2>Reporte 5: Top pagado</h2>
  <table>
    <thead>
      <tr>
        <th>departamento</th>
        <th>num_empleado</th>
        <th>nombre_completo</th>
        <th>salario</th>
      </tr>
    </thead>
    <tbody>
      {% if top_pagados and top_pagados|length > 0 %}
        {% for t in top_pagados %}
          <tr>
            <td>{{ t.departamento }}</td>
            <td>{{ t.num_empleado }}</td>
            <td>{{ t.nombre_completo }}</td>
            <td>{{ t.salario }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr><td colspan="4" class="muted">Sin datos</td></tr>
      {% endif %}
    </tbody>
  </table>
</body>
</html>
